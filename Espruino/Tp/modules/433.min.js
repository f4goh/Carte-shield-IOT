function m(c){for(var a=c.data.length,b=new Uint8Array(a+7>>3),d=0;d<a;d+=8)b[d>>3]=parseInt(c.data.substr(d,8),2);a=new Uint8Array(b.buffer,0,b.length-1);a.reduce(function(f,e){return f^e},0)==b[b.length-1]&&c.callback(a)}function n(c,a){var b=0|1E4*(a.time-a.lastTime);1>b|4<b?(20<c.data.length&&m(c),c.data=""):a.state||(c.data+=0|2<b)}exports.rx=function(c,a){var b={data:"",callback:a,stop:function(){clearWatch(b.intr)}};setTimeout(function(){b.intr=setWatch(n.bind(null,
b),c,{repeat:!0,edge:"both"})},200);return b};exports.tx=function(c,a,b,d){function f(){digitalPulse(c,1,e);0<b--?setTimeout(f,l+2+10*Math.random()):d&&setTimeout(d,l)}var e=[],k=E.toUint8Array(a),p=k.reduce(function(g,h){return g^h},0);a=new Uint8Array(k.length+1);a.set(k);a[a.length-1]=p;a.forEach(function(g){for(var h=7;0<=h;h--)e.push(g&128?.3:.1,.42),g<<=1});e.push(1);var l=E.sum(e)+1;digitalPulse(c,1,[1]);setTimeout(f,1.5)}